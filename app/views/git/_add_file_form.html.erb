<%= form_tag(polymorphic_path([resource, :git_add_file], version: version), multipart: true) do %>
  <div class="form-group">
    <label class="required">File</label>
    <%= file_field_tag 'file[data]' -%>
  </div>

  <div class="form-group">
    <label class="required">Filename</label>
    <%= text_field_tag 'file[path]', '', class: 'form-control' -%>
    <p class="help-block">Use <code>/</code> in the path to add the file into a directory.</p>
  </div>

  <%= submit_tag('Upload', class: 'btn btn-primary') %>
<% end %>

<script>
    $j(document).ready(function () {
        // Set file path to be selected file's filename
        $j('#file_data').change(function () {
            var pathField = $j('#file_path');
            var parts = $j(this).val().split(/[\\\/]/);
            pathField.val(parts[parts.length - 1]);
        });
    })
</script>
